{"ast":null,"code":"import { API_BASE_URL, ACCESS_TOKEN } from '../constants';\n\nconst request = options => {\n  const headers = new Headers({\n    'Content-Type': 'application/json'\n  });\n\n  if (localStorage.getItem(ACCESS_TOKEN)) {\n    headers.append('Authorization', 'Bearer ' + localStorage.getItem(ACCESS_TOKEN));\n  }\n\n  const defaults = {\n    headers: headers\n  };\n  options = Object.assign({}, defaults, options);\n  return fetch(options.url, options).then(response => response.json().then(json => {\n    if (!response.ok) {\n      return Promise.reject(json);\n    }\n\n    return json;\n  }));\n};\n\nexport function getCurrentUser() {\n  if (!localStorage.getItem(ACCESS_TOKEN)) {\n    return Promise.reject(\"No access token set.\");\n  }\n\n  return request({\n    url: API_BASE_URL + \"/user\",\n    method: 'GET'\n  });\n}\nexport function login(loginRequest) {\n  return request({\n    url: API_BASE_URL + \"/auth/login\",\n    method: 'POST',\n    body: JSON.stringify(loginRequest)\n  });\n}\nexport function signup(signupRequest) {\n  return request({\n    url: API_BASE_URL + \"/auth/signup\",\n    method: 'POST',\n    body: JSON.stringify(signupRequest)\n  });\n}","map":{"version":3,"names":["API_BASE_URL","ACCESS_TOKEN","request","options","headers","Headers","localStorage","getItem","append","defaults","Object","assign","fetch","url","then","response","json","ok","Promise","reject","getCurrentUser","method","login","loginRequest","body","JSON","stringify","signup","signupRequest"],"sources":["/Users/payhada-user/IdeaProjects/react-oauth2/src/util/APIUtils.js"],"sourcesContent":["import { API_BASE_URL, ACCESS_TOKEN } from '../constants';\n\nconst request = (options) => {\n    const headers = new Headers({\n        'Content-Type': 'application/json',\n    })\n    \n    if(localStorage.getItem(ACCESS_TOKEN)) {\n        headers.append('Authorization', 'Bearer ' + localStorage.getItem(ACCESS_TOKEN))\n    }\n\n    const defaults = {headers: headers};\n    options = Object.assign({}, defaults, options);\n\n    return fetch(options.url, options)\n    .then(response => \n        response.json().then(json => {\n            if(!response.ok) {\n                return Promise.reject(json);\n            }\n            return json;\n        })\n    );\n};\n\nexport function getCurrentUser() {\n    if(!localStorage.getItem(ACCESS_TOKEN)) {\n        return Promise.reject(\"No access token set.\");\n    }\n\n    return request({\n        url: API_BASE_URL + \"/user\",\n        method: 'GET'\n    });\n}\n\nexport function login(loginRequest) {\n    return request({\n        url: API_BASE_URL + \"/auth/login\",\n        method: 'POST',\n        body: JSON.stringify(loginRequest)\n    });\n}\n\nexport function signup(signupRequest) {\n    return request({\n        url: API_BASE_URL + \"/auth/signup\",\n        method: 'POST',\n        body: JSON.stringify(signupRequest)\n    });\n}"],"mappings":"AAAA,SAASA,YAAT,EAAuBC,YAAvB,QAA2C,cAA3C;;AAEA,MAAMC,OAAO,GAAIC,OAAD,IAAa;EACzB,MAAMC,OAAO,GAAG,IAAIC,OAAJ,CAAY;IACxB,gBAAgB;EADQ,CAAZ,CAAhB;;EAIA,IAAGC,YAAY,CAACC,OAAb,CAAqBN,YAArB,CAAH,EAAuC;IACnCG,OAAO,CAACI,MAAR,CAAe,eAAf,EAAgC,YAAYF,YAAY,CAACC,OAAb,CAAqBN,YAArB,CAA5C;EACH;;EAED,MAAMQ,QAAQ,GAAG;IAACL,OAAO,EAAEA;EAAV,CAAjB;EACAD,OAAO,GAAGO,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBF,QAAlB,EAA4BN,OAA5B,CAAV;EAEA,OAAOS,KAAK,CAACT,OAAO,CAACU,GAAT,EAAcV,OAAd,CAAL,CACNW,IADM,CACDC,QAAQ,IACVA,QAAQ,CAACC,IAAT,GAAgBF,IAAhB,CAAqBE,IAAI,IAAI;IACzB,IAAG,CAACD,QAAQ,CAACE,EAAb,EAAiB;MACb,OAAOC,OAAO,CAACC,MAAR,CAAeH,IAAf,CAAP;IACH;;IACD,OAAOA,IAAP;EACH,CALD,CAFG,CAAP;AASH,CArBD;;AAuBA,OAAO,SAASI,cAAT,GAA0B;EAC7B,IAAG,CAACd,YAAY,CAACC,OAAb,CAAqBN,YAArB,CAAJ,EAAwC;IACpC,OAAOiB,OAAO,CAACC,MAAR,CAAe,sBAAf,CAAP;EACH;;EAED,OAAOjB,OAAO,CAAC;IACXW,GAAG,EAAEb,YAAY,GAAG,OADT;IAEXqB,MAAM,EAAE;EAFG,CAAD,CAAd;AAIH;AAED,OAAO,SAASC,KAAT,CAAeC,YAAf,EAA6B;EAChC,OAAOrB,OAAO,CAAC;IACXW,GAAG,EAAEb,YAAY,GAAG,aADT;IAEXqB,MAAM,EAAE,MAFG;IAGXG,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeH,YAAf;EAHK,CAAD,CAAd;AAKH;AAED,OAAO,SAASI,MAAT,CAAgBC,aAAhB,EAA+B;EAClC,OAAO1B,OAAO,CAAC;IACXW,GAAG,EAAEb,YAAY,GAAG,cADT;IAEXqB,MAAM,EAAE,MAFG;IAGXG,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeE,aAAf;EAHK,CAAD,CAAd;AAKH"},"metadata":{},"sourceType":"module"}